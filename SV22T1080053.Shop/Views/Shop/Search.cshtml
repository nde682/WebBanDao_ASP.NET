@using SV22T1080053.Shop.AppCodes
@model ShopSearchModel
@{
    Layout = null;
}
@if (Model.Products.Count == 0)
{
    <div class="col-12 text-center py-5">
        <i class="fas fa-search fa-3x text-muted mb-3"></i>
        <p class="fs-5 text-muted">Không tìm thấy sản phẩm nào phù hợp.</p>
    </div>
}
else
{
    foreach (var item in Model.Products)
    {
        string imgSrc = string.IsNullOrEmpty(item.Photo)
                        ? $"{ApplicationContext.ProductImagePath}NOimages.png"
                        : $"{ApplicationContext.ProductImagePath}{item.Photo}";

        <div class="col-md-6 col-lg-6 col-xl-4">
            <div class="product-item rounded position-relative">
                <div class="product-item-inner border rounded">
                    <div class="product-item-inner-item">
                        <a href="~/Product/Detail/@item.ProductID">
                            <img src="@imgSrc" class="img-fluid w-100 rounded-top" alt="@item.ProductName" style="height: 250px; object-fit: cover;">
                        </a>
                        <div class="product-details">
                            <a href="~/Product/Detail/@item.ProductID" title="Xem chi tiết"><i class="fa fa-eye fa-1x"></i></a>
                        </div>
                    </div>
                    <div class="text-center rounded-bottom p-4">
                        <a href="~/Product/Detail/@item.ProductID" class="d-block h5 text-truncate" title="@item.ProductName">@item.ProductName</a>
                        <span class="text-primary fs-5 fw-bold">@item.Price.ToString("N0") ₫</span>
                    </div>
                </div>

                <div class="product-item-add border border-top-0 rounded-bottom text-center p-4 pt-0">
                    <a href="javascript:;" onclick="addToCart(@item.ProductID)" class="btn btn-primary border-secondary rounded-pill py-2 px-4 mb-4 ajax-add-to-cart">
                        <i class="fas fa-shopping-cart me-2"></i> Thêm vào giỏ
                    </a>
                    <div class="d-flex justify-content-center">
                        <p class="text-primary"></p>
                    </div>
                </div>
            </div>
        </div>
    }

    if (Model.PageCount > 1)
    {
        <div class="col-12 mt-5">
            <div class="pagination d-flex justify-content-center">
                @if (Model.Page > 1)
                {
                    <a href="javascript:;" onclick="doSearch(@(Model.Page - 1))" class="rounded">&laquo;</a>
                }

                @for (int p = 1; p <= Model.PageCount; p++)
                {
                    if (p == Model.Page)
                    {
                        <a href="javascript:;" class="active rounded">@p</a>
                    }
                    else
                    {
                        if (p == 1 || p == Model.PageCount || (p >= Model.Page - 2 && p <= Model.Page + 2))
                        {
                            <a href="javascript:;" onclick="doSearch(@p)" class="rounded">@p</a>
                        }
                    }
                }

                @if (Model.Page < Model.PageCount)
                {
                    <a href="javascript:;" onclick="doSearch(@(Model.Page + 1))" class="rounded">&raquo;</a>
                }
            </div>
        </div>
    }
}